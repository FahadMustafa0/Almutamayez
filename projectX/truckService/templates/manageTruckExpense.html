{% extends 'base.html'%}
{% load crispy_forms_tags %}
{% block title%}
Truck Expense Page
{% endblock title%}
{% block content%}

<div class="content-wrapper">
	<!-- Content Header (Page header) -->
	<div class="content-header" style="padding : 20px">
		<div class="container-fluid">
			<div class="row mb-2">
				<div class="col-sm-6">
					<h1 class="m-0">Manage Truck Expense  </h1>
				</div><!-- /.col -->
				<div class="col-sm-6">
					<ol class="breadcrumb float-sm-right">
						<li class="breadcrumb-item"><a href="#">Home</a></li>
						<li class="breadcrumb-item active">Manage Truck Expense </li>
					</ol>
				</div><!-- /.col -->
			</div><!-- /.row -->
		</div><!-- /.container-fluid -->
	</div>
	<!-- /.content-header -->

<!--Update_MOdal-->
<div class="modal fade" id="modal-default">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Update Truck Expense </h4>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
						<form action="" value="" id="updateForm" method="POST" class="ui form" enctype='multipart/form-data' >

								{% csrf_token %}
								<label for="date">Date</label>
								<input type='text' id="date" name="date">
								<label for="truck_no">Truck_no:</label>
								<div class="input-group mb-3">
										<select name="truck_no" class="custom-select" id="dropdown">

										 <!-- select data-->
										</select>
									</div>
								{% comment %} <input type='text' id="location" name="location" value=""> {% endcomment %}
								<label for="renewalFee">Renewal Fee:</label>
								<input type='text' id="renewalFee" name="renewalFee" value="">

								<label for="fuel_km">Fuel KM:</label>
								<input type='text' id="fuel_km" name="fuel_kilometers" value="">
								<label for="fuel_litters">Fuel Litres:</label>
								<input type='text' id="fuel_litters" name="fuel_litters" value="">
								<label for="fuel">Fuel Cost:</label>
								<input type='text' id="fuel" name="fuel" value="">
								<label for="maintenance">Maintenance:</label>
								<input type='text' id="maintenance" name="maintenance" value="">
								<label for="repair_replace">Repair/Replace:</label>
								<input type='text' id="repair_replace" name="repair_replace" value="">
								<label for="parking">Parking:</label>
								<input type='text' id="parking" name="parking" value=""> 
								<label for="others">Others:</label>
								<input type='text' id="others" name="others" value="">
								<label for="vat">VAT Amount:</label>
								<input type='text' id="vat" name="vat" value="">
								<label for="receipt_no">Receipt No:</label>
								<input type='text' id="receipt_no" name="receipt_no" value="">
								<label for="paid_by">Paid By:</label>
								<div class="input-group mb-3">
									<select name="paid_by" class="custom-select" id="dropdown2">

									<!-- select data-->
									</select>
								</div>

								<input type="hidden" id="postId" name="postId" value="" disabled>
								{% comment %} <input type="hidden" id="visa_alert" name="visa_alert" value="{{visa_expiry_alert}}" disabled>
								<input type="hidden" id="visa_expire" name="visa_expire" value="{{visa_expired}}" disabled>
								<input type="hidden" id="passport_alert" name="passport_alert" value="{{passport_expiry_alert}}" disabled>
								<input type="hidden" id="passport_expired" name="passport_expired" value="{{passport_expired}}" disabled>
								<input type="hidden" id="truck_alert" name="truck_alert" value="{{truck_expiry_alert}}" disabled>
								<input type="hidden" id="truck_expired" name="truck_expired" value="{{truck_expired}}" disabled> {% endcomment %}

								{% comment %} {{form1.as_table}}
								{{ cform.as_table }} {% endcomment %}



				</div>
				<div class="modal-footer justify-content-between">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type='submit' id="update"  class="ui teal button">Update{% comment %} <i class="checkmark icon"></i> {% endcomment %}</button>
				</div>
		</form>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!--/modal-->
		<!-- Main content -->
		<section class="content">
				<div class="card">
					<div class="card-header">
						<h3 class="card-title">Staff Truck Records</h3>
					</div>
					<!-- /.card-header -->
					<div id="msgdiv"> </div>


					<div class="card-body"> 

						<table id="truckexpenseTable" class="table table-bordered table-hover">
								<thead>
								<tr>
									<th>Date</th>
									<th>Truck_no</th>
									<th>Renewal Fee</th>
									<th>Fuel KMs</th>
									<th>Fuel Litres</th>
									<th>Fuel Cost</th>
									<th>Maintenance</th>
									<th>Repair/Replace</th>
									<th>Parking</th>
									<th>Others </th>
									<th>VAT Amount</th>
									<th>Paid By</th>
                 					 <th>Receipt No</th>
									<th>Total Amount</th>
									<th>Operations</th>
								</tr>
								</thead>
								<tbody id="tblbody">

														{% comment %} <tr>...</tr> {% endcomment %}
												{% comment %} <td id="td1">{{customer.first_name}} {{customer.last_name}}</td>
												<td id="td2">{{customer.forignUser.location}}</td>
												<td id="td3">{{customer.forignUser.contact}}</td>
												<td id="td4"> {{customer.forignUser.tripCharges}}</td>
												<td id="td5">{{customer.forignUser.Vat}}</td>
												<td id="td6">-</td>
												<td id="td7">-</td>
												<td id="td8">-</td> {% endcomment %}
												{% comment %} {% for customer in customers %}
												<tr id='t{{customer.id}}'>
												<td>{{customer.first_name}} {{customer.last_name}}</td>
												<td>{{customer.forignUser.location}}</td>
												<td>{{customer.forignUser.contact}}</td>
												<td> {{customer.forignUser.tripCharges}}</td>
												<td>{{customer.forignUser.Vat}}</td>
												<td>-</td>
												<td>-</td>
												<td>-</td>
												<td> <button id="edit{{customer.id}}" value={{customer.id}} class="ui teal button edit_btn" type="button" data-toggle="modal" data-target="#modal-default" >Edit</button> <button  id="del{{customer.id}}" value={{customer.id}} class="ui red button del_cust_button">Delete</button></td>
												</tr>
										{% endfor %} {% endcomment %}
								</tbody>
								<tfoot>
								<tr>
									<th>Date</th>
									<th>Truck_no</th>
									<th>Renewal Fee</th>
									<th>Fuel KMs</th>
									<th>Fuel Litres</th>
									<th>Fuel Cost</th>
									<th>Maintenance</th>
									<th>Repair/Replace</th>
									<th>Parking</th>
									<th>Others </th>
									<th>VAT Amount</th>
									<th>Paid By</th>
                                   <th>Receipt No</th>
									<th>Total Amount</th>
									<th>Operations</th>
								</tr>
								</tfoot>
							</table>


					</div>
					<!-- /.card-body -->
				</div>
				<!-- /.card -->
			</section>
			<!-- /.content -->
</div>

<style type="text/css">

		/* datepicker css */

		.ui-datepicker {
			text-align: center;
			background-color: #ffff;
		}

		.ui-datepicker-trigger {
			margin: 0 0 0 5px;
			vertical-align: text-top;
		}

		.ui-datepicker {
			font-family: Open Sans, Arial, sans-serif;
			margin-top: 2px;
			padding: 0 !important;
			border-color: #c9f0f5 !important;
		}

		.ui-datepicker {
			width: 256px;
		}

		.openemr-calendar .ui-datepicker {
			width: 191px;
		}

		.ui-datepicker table {
			width: 256px;
			table-layout: fixed;
		}

		.openemr-calendar .ui-datepicker table {
			width: 191px;
			table-layout: fixed;
		}

		.ui-datepicker-header {
			background-color: #3e9aba !important;
			background-image: none !important;
			border-radius: 0;
		}

		.openemr-calendar .ui-datepicker-header {
			background-color: #e6f7f9 !important;
			border-width: 1px;
			border-color: #c9f0f5;
			border-style: solid;
		}

		.ui-datepicker-title {
			line-height: 35px !important;
			margin: 0 10px !important;
		}

		.openemr-calendar .ui-datepicker-title {
			line-height: 20px !important;
		}

		.ui-datepicker-prev span {
			display: none !important;
		}

		.ui-datepicker-next {
			text-align: center;
		}

		.ui-datepicker-next span {
			display: none !important;
		}

		.ui-datepicker-prev {
			background-color: transparent !important;
			background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAMCAYAAACulacQAAAAUklEQVQYlXWPwQnAMAwDj9IBOlpH8CjdJLNksuujFIJjC/w6WUioFBcqJ7sGEAD5Y/hpqLRghRv4YQlUjqXI3Kql2MixraGbEhVcDXcFUR/1egEHNuTBpFW0NgAAAABJRU5ErkJggg==') !important;
			height: 12px !important;
			width: 7px !important;
			margin: 14px 12px;
			display: inline-block;
			left: 0 !important;
			top: 0 !important;
		}

		.openemr-calendar .ui-datepicker-prev {
			background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAOCAYAAAD9lDaoAAAAuUlEQVQokXXRsUtCYRAA8J8pDQ1CVIgIgtBU2NDiZIuDS4uLf6WDS1O0tLREEE8icBNKS3lTs8/B78XHw3dwcHA/juOuqjzucYJVrQQMcYctvo4OgEFIeMK6iPphCjzjEWLUC3vACx7yRo5uMUIFr5gii1EL41AvMIkBVPGH04DrSLEsIvjEOZq4wi9+iijDR0ANXOMbmxjlcIY2LtANO6YxymGCDs5wg/ciYv+KBJeY4+2A+Y9j4Y47RtUkrNXeDxUAAAAASUVORK5CYII=') !important;
			height: 14px !important;
			width: 9px !important;
			margin: 5px !important;
		}

		.ui-datepicker-next {
			cursor: pointer;
		}

		.ui-datepicker-prev {
			cursor: pointer;
		}

		.ui-datepicker-next {
			background-color: transparent !important;
			background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAMCAYAAABfnvydAAAAVUlEQVQYlXWQ0Q3AIAhEL07gKI7kKN2kI3Wk1w9to3KQEELucQEECOizhhTQGHFnwOdgobWx0GkZILfYBhXl0STVbPoBarbkL7ozN/F8VBBXh8uJgF5r2hrI4GHUkAAAAABJRU5ErkJggg==') !important;
			height: 12px !important;
			width: 8px !important;
			margin: 14px 12px;
			display: inline-block;
			right: 0 !important;
			top: 0 !important;
		}

		.openemr-calendar .ui-datepicker-next {
			background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAOCAYAAAASVl2WAAAAtElEQVQYlXXQsUpCcRQH4I97EQyHa1pgIEE0hBGYL+BjNLRFjxXh4rM4F21BS4S4FAgqQioOngt/RM/6+zi/w4EanlA4MDkecYsO3vG/D8a4Rx03eMMqBQt8oodTXAdalwBm+IpNDVxG3aYEMMU3ujjDBT5SAH9R2cE58mwPFOgneJSCGp7RjLoXTEtQjbCFOV7xCxkqdp9sYxnhpFyb4QFXdh8c4Cc9Ko++OwzjFwfn5FiwBVeuI/K2UCkSAAAAAElFTkSuQmCC') !important;
			height: 14px !important;
			width: 8px !important;
			margin: 5px;
		}

		.ui-datepicker-month {
			border-radius: 2px;
			background-color: #3985a0;
			width: 110px !important;
			height: 22px;
			font-family: Open Sans !important;
			color: #fff;
			font-size: 14px !important;
			font-weight: 600;
			text-align: left;
			border: none !important;
			margin-right: 17px !important;
			vertical-align: text-top;
		}

		.openemr-calendar .ui-datepicker-month {
			font-family: Open Sans, Arial, sans-serif;
			color: rgba(34, 34, 34, 0.87);
			font-size: 12px !important;
			font-weight: 700;
			text-align: center;
			transform: scaleX(1.0029)
		}

		.ui-datepicker-year {
			border-radius: 2px;
			background-color: #3985a0;
			width: 61px !important;
			height: 22px;
			border: none !important;
			font-family: Open Sans !important;
			color: #fff;
			font-size: 14px !important;
			font-weight: 600;
			text-align: left;
			vertical-align: text-top;
		}

		.openemr-calendar .ui-datepicker-year {
			font-family: Open Sans, Arial, sans-serif;
			color: rgba(34, 34, 34, 0.87);
			font-size: 12px !important;
			font-weight: 700;
			text-align: center;
			transform: scaleX(1.0029)
		}

		.ui-datepicker-month option,
		.ui-datepicker-year option {
			color: #3985a0 !important;
			background-color: #fff !important;
			font-family: Open Sans !important;
			font-size: 14px !important;
			font-weight: 600;
		}

		.ui-datepicker-month option[selected],
		.ui-datepicker-year option[selected] {
			background-color: #e5edf0 !important;
		}

		.ui-datepicker .ui-state-hover {
			/*background: none !important;*/
			border: 0 !important;
		}

		.ui-datepicker td {
			vertical-align: top;
		}

		.ui-datepicker .ui-state-default {
			border-radius: 2px;
			border-color: #edebeb !important;
		/*     background: white !important; */
			width: 24px;
			height: 24px;
			padding: 0 !important;
			line-height: 24px;
			text-align: center !important;
			font-family: Open Sans, Arial, sans-serif;
			color: #707070;
			font-size: 13px;
			font-weight: 400 !important;
			margin: 7px 0 0 4px;
		}

		.ui-datepicker .ui-state-default.ui-state-highlight{
			border-color: #dcdcdc;
			background-color: #cff3f8 !important;
			color: #3e9aba !important;
		}

		.openemr-calendar .ui-state-default {
			font-size: 10px;
			margin: 0;
		}

		.ui-datepicker td {
			width: 33px;
		}

		.openemr-calendar .ui-datepicker td {
			width: 26px;
		}

		.openemr-calendar .ui-state-default {
			width: 26px;
			height: 20px;
			line-height: 20px;
		}
		.ui-state-default.ui-state-hover {
			border-color: #dcdcdc;
			background-color: #cff3f8 !important;
		}

		.ui-datepicker .ui-state-active {
			border-color: #dcdcdc;
			background-color: #cff3f8 !important;
			color: #3e9aba !important;
		}

		.ui-datepicker-calendar thead tr th {
			font-family: Open Sans, Arial, sans-serif;
			color: #549fa8;
			font-size: 12px;
			font-weight: 400;
			padding: 0.45em 0.3em !important;
			/*   width: 15px !important; */
		}

		.openemr-calendar .ui-datepicker-calendar thead tr th {
			font-size: 10px;
		}

		.ui-datepicker-close {
			display: none;
		}

		.ui-datepicker thead {
			background-color: #f5f5f5;
		}

		.openemr-calendar .ui-datepicker thead {
			background: none;
		}

		.ui-state-default.ui-datepicker-current {
			float: none !important;
			font-family: Open Sans, Arial, sans-serif;
			color: #fff;
			font-size: 14px;
			font-weight: 400;
			text-align: left;
			border-width: 0 !important;
			border: none;
			vertical-align: top;
			margin: 0 !important;
			background-color: transparent !important;
		}

		.ui-datepicker-buttonpane.ui-widget-content {
			text-align: center;
			background-color: #3e9aba;
			margin: 0 !important;
			height: 28px;
			padding: 0 !important;
		}

		.openemr-calendar .ui-datepicker-year {
			background-color: transparent;
		}

		.openemr-calendar .ui-datepicker-month {
			background-color: transparent;
		}

		.openemr-calendar .ui-state-default {
			border: 0 !important;
		}

		.openemr-calendar .ui-datepicker-month {
			margin-right: 10px !important;
		}

</style>

  <script>
	$(function () {
	  $("#date").prop("autocomplete", "off")
	  $("#date").datepicker({ dateFormat: 'yy-mm-dd' });

	  $("#totalAmount").prop("readonly", "true")
	});
	  function viewpoint(){
		  $.ajax({
				  type : "GET" ,
				  url :  '/truckexpenselistshow/',
				 // data : {id:'{{id}}'},


				  success: function(response){


					$("#truckexpenseTable tbody").empty()
					
					   response.trucksexpense.forEach((item, index) => {
						var date=changeFormate(item.date)
						console.log(item)
						  $("#truckexpenseTable tbody").append(`<tr><td>${date}</td>
						  <td id="locid">${item.truck_no.truckNumber}</td>
						  <td>${item.renewalFee}</td>
						  <td >${item.fuel_kilometers}</td>
		 				  <td >${item.fuel_litters}</td>
						  <td >${item.fuel}</td>
						  <td>${item.maintenance}</td>
						  <td >${item.repair_replace}</td>
						  <td >${item.parking}</td>
						  <td>${item.others}</td>
						  <td>${item.vat}</td>
						  <td>${item.paid_by.user.first_name+" "+item.paid_by.user.last_name}</td>
                        <td>${item.receipt_no}</td>
						  <td >${item.totalAmount}</td>
						  <td> <button id="edit${item.truck_no.truckNumber}" value="${item.id}" onclick="editFunction(${item.id})"  class="ui teal button edit_btn" type="button" data-toggle="modal" data-target="#modal-default" >Edit</button> <button  id="del${item.id}" onclick="deleteFunction(${item.id})"  class="ui red button del_cust_button">Delete</button></td>
					  </tr>`)

						  /*$("#td1").append(item.user.first_name)
						  //$("#td").html(item.user.first_name)
						  $("#td2").append(item.location)
						  $("#td3").append(item.contact)
						  $("#td4").append(item.tripCharges)
						  $("#td5").append(item.Vat)  */
						});
				  }
 
				});
			}
	   $(document).ready(function(){
		   /*
		   let visa1=$("#visa_alert").val()
		   const myArray1 = visa1.split("[")
		   const myArray11 = myArray1[1].split("]")
		   const myArray21 = myArray11[0]
		   let final_array1 = myArray21.split(",")

		   let visa2=$("#visa_expire").val()
		   const myArray2 = visa2.split("[")
		   const myArray12 = myArray2[1].split("]")
		   const myArray22 = myArray12[0]
		   let final_array2 = myArray22.split(",")

		   let visa3=$("#passport_alert").val()
		   const myArray3 = visa3.split("[")
		   const myArray13 = myArray3[1].split("]")
		   const myArray23 = myArray13[0]
		   let final_array3 = myArray23.split(",")

		   let visa4=$("#passport_expired").val()
		   const myArray4 = visa4.split("[")
		   const myArray14 = myArray4[1].split("]")
		   const myArray24 = myArray14[0]
		   let final_array4 = myArray24.split(",")

		   let visa5=$("#truck_alert").val()
		   const myArray5 = visa5.split("[")
		   const myArray15 = myArray5[1].split("]")
		   const myArray25 = myArray15[0]
		   let final_array5 = myArray25.split(",")

		   let visa6=$("#truck_expired").val()
		   const myArray6 = visa6.split("[")
		   const myArray16 = myArray6[1].split("]")
		   const myArray26 = myArray16[0]
		   let final_array6 = myArray26.split(",")

		   if (final_array1.length>0 || final_array2.length>0 || final_array3.length>0 || final_array4.length>0 || final_array5.length>0 || final_array6.length>0 ){
    
			 $(document).Toasts('create', {
				class: 'bg-info',
				title: 'Expiry Alert!  ',
				subtitle: '  This is to alert you about expiry',
				body: "<strong><strong><span style='color:#E0FF1E'>Visa of the Staff Listed bellow is going to expire : <br></span> </strong></strong>"+final_array1+"<br><br>"+"<strong><strong><span style='color:#E0FF1E'>Visa of the Staff Listed bellow has been expired : </span> </strong></strong>"+"<br>"+final_array2+"<br><br>"+"<strong><strong><span style='color:#E0FF1E'>Visa of the Staff Listed bellow has been expired : <br></span> </strong></strong>"+""+final_array3+"<br><br>"+"<strong><strong><span style='color:#E0FF1E'>Visa of the Staff Listed bellow has been expired : <br></span> </strong></strong>"+""+final_array4+"<br><br>"+"<strong><strong><span style='color:#E0FF1E'>Visa of the Staff Listed bellow has been expired : <br></span> </strong></strong>"+""+final_array5+"<br><br>"+"<strong><strong><span style='color:#E0FF1E'>Visa of the Staff Listed bellow has been expired : <br></span> </strong></strong>"+""+final_array6+"<br><br>",
				
				delay:5000,
				autohide: true,
				});

		   }

		   */
		   
		   

		   
			
						
			 viewpoint();

			 //=========================================================================

	   });


	/*  $("#updateForm").submit(function(e){
		  e.preventDefault();
		  var formData = new FormData(this);
		  console.log("check")
		  var val = $("#edit_btn").val();
		  console.log(formData)
		  $.ajax({
			  type : "POST" ,
			  url :  '/updatecustomer/'+val.toString()+'/',
			  contentType: false,
			  processData: false,
			  data : formData,
			  //headers: {'X-CSRFToken': csrftoken},
			 // headers: {"Authorization": localStorage.getItem('token')}

			  success: function(response){
				  alert("good")
			  }
		  });
	  }); */


	 //$(".edit_btn").click(function(){
		 function editFunction(arg){
		  console.log(arg)
		  let val = arg

		 // const csrftoken = Cookies.get('csrftoken');
		 const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
		 $("#postId").attr("value",val)
		  $.ajax({
				  type : "POST" ,
				  url :  '/truckexpenselistshow/',
				  data : {id: val},
				  headers: {'X-CSRFToken': csrftoken},
				 // headers: {"Authorization": localStorage.getItem('token')}

				  success: function(response){
					
					 //var customerobj =response.specificCustomer
					 let trucksexpense=response.trucksexpense
					 let staffNames=response.staffNames
					 console.log(">>>>>>>>",staffNames)

					 let truckNumbers=response.truckNumbers
					 console.log(trucksexpense)
						  $("#dropdown").empty()
						  $("#date").prop("value",trucksexpense.date)
						  $("#renewalFee").prop("value",trucksexpense.renewalFee)
						  $("#fuel_km").prop("value",trucksexpense.fuel_kilometers)
						  $("#fuel_litters").prop("value",trucksexpense.fuel_litters)
						  $("#fuel").prop("value",trucksexpense.fuel)
						  $("#maintenance").prop("value",trucksexpense.maintenance)
						  $("#repair_replace").prop("value",trucksexpense.repair_replace)
						  $("#parking").prop("value",trucksexpense.parking)
						  $("#others").prop("value",trucksexpense.others)
						  $("#vat").prop("value",trucksexpense.vat)
						 // $("#paid_by").prop("value",trucksexpense.paid_by.user.first_name+" "+trucksexpense.paid_by.user.last_name)
						  $("#receipt_no").prop("value",trucksexpense.receipt_no)
						  $("#totalAmount").prop("value",trucksexpense.totalAmount)
					 //$("#dropdown").html( `<option id="defaultOption" name="location" value='${trucksexpense.location}' selected>${trucksexpense.location}</option>`)
					  // drop down without the loacation of slected customer
							  truckNumbers.forEach((truckitem, index) => {
								  console.log("yyyyyyyyy",truckitem)
								  if(truckitem.truckNumber!=trucksexpense.truck_no){
								  $("#dropdown").append(`<option id="dropdown1" name="location" value='${truckitem.truckNumber}' >${truckitem.truckNumber}</option>`)
								  }else{
									  $("#dropdown").append( `<option id="defaultOption" name="location" value='${trucksexpense.truck_no}' selected>${truckitem.truckNumber}</option>`)

								  }
								  });//end foreach

								  staffNames.forEach((staffitem, index) => {
                                    // alert(x.username)
									
                                    if(staffitem.id!=trucksexpense.paid_by.id){
										
                                    $("#dropdown2").append(`<option id="dropdown1" name="location" value='${staffitem.id}' >${staffitem.user.first_name+" "+staffitem.user.last_name}</option>`)
                                    }else{
										
                                        $("#dropdown2").append( `<option id="defaultOption" name="location" value='${trucksexpense.paid_by.id}' selected>${staffitem.user.first_name+" "+staffitem.user.last_name}</option>`)
    
                                    }
                                    });
					/*for(location in response.locations){
					 $("#dropdown1").html(location)
						  }*/


				   //$("#t"+val).remove()








				  }//end success
				});//ajax end


		//});
	  }// view function end
	  //});

	  $("#updateForm").submit(function(e){
		  e.preventDefault();
		  $("#modal-default").modal('hide');
		  $(".modal-backdrop").modal('hide');
		  var formData = new FormData(this);


		  //var delay=30;
		  var g =  $("#postId").val()
		 // var g=$(".edit_btn").val()

		  $.ajax({
					  type : "POST" ,
					  url :  '/updatetruckexpense/'+g.toString()+'/',
					  contentType: false,
					  processData: false,
					  data : formData,
					  //headers: {'X-CSRFToken': csrftoken},
				  // headers: {"Authorization": localStorage.getItem('token')}

					  success: function(response){

						  viewpoint()

						  /* setTimeout(function() {
							  window.location.replace("/customerlist/")
						  }, delay); */

						  //window.location.replace("/customerlist/")
						  if(response.updatecheck==true){
								  $(document).Toasts('create', {
								  class: 'bg-info',
								  title: 'Toast Title',
								  subtitle: 'Subtitle',
								  body: 'Updated Successfully!',
								  autohide: true
								  });
								  //delay=1000
								  //$("#toastsContainerTopRight").toast("hide");

							 // $("#msgdiv").html('<div class="ui green message">Updated Successfully!</div>')
							   $(document).Toasts('create', {
              class: 'bg-info',
              title: 'Toast Title',
              subtitle: 'Subtitle',
              body: 'Updated Successfully!',
              autohide: true
              });
						  }//end if ststmenet




					  }//end success
			  });//end ajax
  });// end update form






	  //$(".del_cust_button").click(function(){
		  function deleteFunction(param){
		  var val = param
		  console.log(val)
		  $.ajax({
				  type : "GET" ,
				  url :  '/deletetruckexpence/',
				  data : {id: val},
				 // headers: {"Authorization": localStorage.getItem('token')}

				  success: function(response){
                   
					if(response.allowed==true){
					   $(document).Toasts('create', {
						   class: 'bg-info',
						   title: 'Toast Title',
						   subtitle: 'Subtitle',
						   body: 'Sorry You are not Allowed | Admin Rights',
						   autohide: true
						   });
   
   
					}
					else if(response.confirm==true){
					   $(document).Toasts('create', {
					   class: 'bg-info',
					   title: 'Toast Title',
					   subtitle: 'Subtitle',
					   body: 'Deleted Successfully!',
	 				   autohide: true
					   });
					   //delay=1000
					   //$("#toastsContainerTopRight").toast("hide");
			   }
					   
					viewpoint()
					
				   }
				});


		//});
			  }
	 // });
	  </script>

{% endblock content%}